
@{
    ViewData["Title"] = "Progress";
    Layout = "~/Views/Shared/_LayoutManage.cshtml";
}

<h2>@ViewData["Title"]</h2>

<p>Status of run test case: <strong><span id="job-status">Job status will go here...</span></strong></p>
@section Scripts
{
    <script src="~/lib/signalr/signalr.js"></script>
    <script>
        document.head || (document.head = document.getElementsByTagName('head')[0]);
        var connection = new signalR.HubConnectionBuilder()
            .withUrl("/jobprogress")
            .configureLogging(signalR.LogLevel.Information)
            .build();
    
         connection.on("@ViewBag.JobId",
            (message) => {
               
                    document.getElementById("job-status").innerText = message;
            });
        connection.start()
            .then(_ => connection.invoke("AssociateJob", "@ViewBag.JobId"))
            .catch(err => console.error(err.toString()));
       
        
    </script>
}

